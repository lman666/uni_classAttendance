{"version":3,"sources":["webpack:///E:/HBuilderProjects/uni_classAttendance05/components/teacherPart/teacherPart.vue?cbc1","webpack:///E:/HBuilderProjects/uni_classAttendance05/components/teacherPart/teacherPart.vue?53f6","webpack:///E:/HBuilderProjects/uni_classAttendance05/components/teacherPart/teacherPart.vue?f015","webpack:///E:/HBuilderProjects/uni_classAttendance05/components/teacherPart/teacherPart.vue?4f95","uni-app:///components/teacherPart/teacherPart.vue","webpack:///E:/HBuilderProjects/uni_classAttendance05/components/teacherPart/teacherPart.vue?0c0b"],"names":["renderjs","component","options","__file","components","uniCard","uniList","uniListItem","uniDatetimePicker","circleProgress","uniPopup","uniSwipeAction","uniSwipeActionItem","clockItem","uniPopupDialog","uniDrawer","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","g0","_self","_c","JSON","stringify","selectedCourse","g1","showPage","g2","g3","courseList","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","hoursOfStart","hoursOfEnd","minutesOfStart","minutesOfEnd","title","hourOfStart","hourOfEnd","minuteOfStart","minuteOfEnd","valueOfStart","valueOfEnd","indicatorStyle","showRight","showLeft","active","isEdit","isShadow","mode","note","start","scrollTop","clockList","methodOfClock","staff","fileName","location","isUploadMethod","isUploadTime","isUploadStaff","currentDate","selDate","showPunResCom","punchResInfo","alreadyPunchCount","totalStaffCount","isShowCanvas","text","style","backgroundColor","viewWidth","viewHeight","styleIsolation","computed","created","uni","bus","methods","updateMyProfile","avatar","nick","then","catch","getCurrentDate","confirmDate","lookUpPunchRes","url","isShowPunchResComponent","calculatePunchResult","isInClockDate","getPunchList","item","punchInfo","item2","calculateAlreadyPunchStaffCount","autoView","complete","showDrawer","closeDrawer","change","addCourse","dialogInputConfirm","val","obj","token","courseName","courseHelper","res","dialogInputCourseClose","getCourseList","getCourseInfo","openLocation","latitude","longitude","success","selectMethodOfClock","getMapLocation","fail","scope","upLoadMethod","_id","result","activeChanged","changeEditStatus","toggle","wx","count","type","staffList","uploadExcel","uniCloud","filePath","cloudPath","parseFile","parseExcel","maskClick","timeClose","timeOk","timeObj","date","swipeItemClickHandler","chackClockList","spl","flag","set","clockInfoToStr","timeOfStart","timeOfEnd","wordToStr","word","bindChangeOfStart","bindChangeOfEnd","selectDate","regionBindClick","changeDate"],"mappings":"mIAAA,oIACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,yCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,QAAS,WACP,OAAO,iFAITC,QAAS,WACP,OAAO,iFAITC,YAAa,WACX,OAAO,2FAITC,kBAAmB,WACjB,OAAO,sJAITC,eAAgB,WACd,OAAO,wEAITC,SAAU,WACR,OAAO,oFAITC,eAAgB,WACd,OAAO,yGAITC,mBAAoB,WAClB,OAAO,uJAITC,UAAW,WACT,OAAO,8DAITC,eAAgB,WACd,OAAO,sIAITC,UAAW,WACT,OAAO,wFAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVC,KAAKC,UAAUR,EAAIS,iBACxBC,EAAKV,EAAIW,UAAmD,OAAvCJ,KAAKC,UAAUR,EAAIS,gBACxCG,EAAKF,EAAKH,KAAKC,UAAUR,EAAIS,gBAAkB,KAC/CI,EAAKb,EAAIW,UAA+C,OAAnCJ,KAAKC,UAAUR,EAAIc,YAC5Cd,EAAIe,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLf,GAAIA,EACJM,GAAIA,EACJE,GAAIA,EACJC,GAAIA,MAKRO,GAAmB,EACnBC,EAAkB,GACtBtB,EAAOuB,eAAgB,G,iCClGvB,yHAAwnB,eAAG,G,oKC+K3nB,YACA,QAEA,o1DAIA,CACAxC,YACAS,YACAJ,kBAEA6B,gBAWA,IAVA,eACA,KACA,KACA,eACA,eACA,KACA,KACA,iBACA,iBACA,uDACA,cACA,MACAO,cACAC,gBAEAD,aACAC,cAGA,sBACA,MACAC,cACAC,gBAEAD,aACAC,cAGA,OACAC,oBACAJ,eACAC,aACAI,cACAC,YACAJ,iBACAC,eACAI,gBACAC,cACAC,mBACAC,iBACAC,+BAEAC,aACAC,YACAtB,cACAL,kBACA4B,SACAC,UACAC,YACAC,QACAC,QACAC,QACAC,YACAC,aACAC,iBACAC,SACAC,YACAC,YACAC,kBACAC,gBACAC,iBACAC,eACAC,WACAC,iBACAC,gBACAC,oBACAC,kBACAC,gBACA9E,UACA+E,UACAC,OACAC,6BAGAC,aACAC,cACApD,cAGA/B,SACAoF,yBAEAC,eACA,yDAEAC,mBAAA,WACAC,gCACA,uBAEAC,6CACA,oBAEA,sBACA,gCAEAC,uBAEAC,2BACAH,UACAG,iBACAC,4BACAC,8BAEAC,kBAEA5E,gCAEA6E,mBAEA7E,6CAIA8E,0BACA,eACA,kBACA,iBACA,cACA,+BACA,+BAGAC,wBACA,eACA,6BAGAC,0BACA,0CACAV,cACAW,yHAKAC,oCACA,yEACA,sBACA,6BAEA,uBAIAC,gCACA,qBACA,yBACA,uBACA,IAYA,EAZA,yBACA,aACA,KACA,WACA,QACA,QACA,QACA,QACA,QACA,QACA,UACA,IACA,8DACA,sBAEAC,KACA,QAEA,8BACA,MACA,6CACA,UAEA,iDAEA,mDACA,4DAIAC,2BACA,iCACA,oDACA,kCACA,EADA,IACA,8EACAC,cACA,8BACA,gBACA,EADA,IACAC,mBAAA,oCACA,EADA,cACA,8EACA,kBACAC,eAEA,gCACA,iCAIAC,2CACA,IACA,6BACA,8BACA,8BACA,gBACA,KAEA,GADAF,SACA,+CACA,EADA,IACA,yFACA,eACAA,UACA,QAEA,+BAEA,UAGAG,qBAAA,WACApB,iBACAqB,qBACA,+BACA,0CAKAC,uBACA,cACA,qBACA,uBAGAC,wBACA,qBACA,uBAGAC,qBACA,WAGAC,qBACA,cACA,qBACA,gCAGAC,+BAAA,8IACA,GAAA1B,gBACA2B,QAAA,gBAOA,OANA,4BACA,kBACAC,GACAC,cACAC,cAEAC,iCAAA,SACAA,kBAAA,OAAAC,SACA,aACAhC,iCACA,OACAA,+BAIA,iDAEAA,4BAAA,2CApBA,IAwBAiC,kCACA,+BACA,sBAGAC,0BAAA,4IACA,OAAAH,iCAAA,SACAA,mBAAA,OAAAC,SACA,cACA,gBACA,oBACA,wCAEA,eACA,cACAhC,8BACA,0CAXA,IAcAmC,4BAAA,4IACA,OAAAJ,iCAAA,SACAA,qBAAA,OAAAC,SACA,aACAhC,8BAEA,mBACA,6BACA,wCAEA,kBACA,oBACA,wBACA,iCACA,wBAEA,iCACA,oBAEA,+BACA,qBAEA,6BACA,0CAvBA,IA0BAoC,2BACA,2CACApC,gBACAqC,WACAC,YACAC,mBACA7G,2BAMA8G,gCACA,qBACA,WACA,uBAEA,iBACA,qBAEA,+BACA,sBAGAC,0BAAA,WACAzC,cACAuC,oBAEA,oCACAvC,kBACAuC,oBACA,uBACA,6BACA,+BACA,iCACA,kBAEAG,gBACA1C,yCAKA,yCACAA,aACA2C,2BACAJ,oBAEAvC,kBACAuC,oBACA,uBACA,6BACA,+BACA,iCACA,kBAEAG,gBACA1C,wCAOA0C,gBACA1C,kCAKA4C,wBAAA,4IACA,OAAAb,iCAAA,SACAA,gEACAc,KAAA,OADAC,SAEA,gCACA,oBACA9C,8BACA,cACAA,0BACA,0CATA,IAYA+C,0BACA,cACA,kBACA,uDAGAC,4BACA,YAIA,4DACA,eACA,iBACA,wDAEAhD,8BARA,eACA,mBAYAiD,qBAAA,WACA,aACA,YACA,YACA,qBACA,8BACA,cACA,qBACA,gCACA,aACAC,qBACAC,QACAC,YACAb,oBAEA,4EACA,yBACAvC,+CACA,CACA,+BACA,0BACA,qBAGA0C,iBACAhH,mBAKA,WACA,gCACA,qBACA,+CAEA,aACA,6BACA,qBACA,iDAGA,+BACAsE,cACAW,yGACA0C,eAOAC,0BAAA,WACAC,cACAC,WACAC,qCACAlB,oBACA,uBAEAG,gBACA1C,iCAKA0D,sBAAA,4IACA,OAAAC,+BAAA,SACAA,yCAAA,OAAA3B,SACA,cACA,mBACAhC,gCAEAA,4BACA,0CARA,IAWA4D,qBACA,sBAGAC,qBAAA,gJACA,uCACAzH,oCAAA,gBACA,OAAA2F,iCAAA,SACAA,yDAAA,OAAAC,SACA,cACA,kBACAhC,iCAEAA,8BAEA,0BACA,0CAEAA,6BAAA,gCAGAA,kCAAA,2CAjBA,IAqBA8D,kBACA,+FACA,8FACA9D,qCACA,kBACAA,iCACA,CACA,+FACA,SACA+D,OACAC,8BAEA,uBACA,eAIAC,kCACA,0CACA,sCAEA,sBAGAC,0BACA,IAEA,EAFA,UACA,QACA,8DACA,SACA,eACA,IACA,EADA,mBACAC,GAAA,8CACA,YAEA,CACAC,IACA,MAHAC,UAKA,mCACA,CACA,YAEA,CACAD,IACA,MAHAC,SAMA,mBACA,8BACA,cAGAC,iCACA,wBACA,oBACA,oBACA,oBACA,OACAC,oBACAC,oBAIAC,sBAYA,MAXA,oBACA,eACAC,SAIAA,EADA,KACAA,MAEAA,KAGA,GAGAC,8BACA,qBACA,yCACA,8CAGAC,4BACA,qBACA,qCACA,0CAGAC,sBACA7E,cACAW,iDAIAmE,4BACA,iBACA,kBACA,iBAEA,cAIAC,uBACA,kBACA,4BACA,4BAEAlI,GACA,iBACA,uBACA,iBAEA,iBAIA,c,8FCxzBA,yHAA2pC,eAAG,G","file":"components/teacherPart/teacherPart.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./teacherPart.vue?vue&type=template&id=835de820&scoped=true&\"\nvar renderjs\nimport script from \"./teacherPart.vue?vue&type=script&lang=js&\"\nexport * from \"./teacherPart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./teacherPart.vue?vue&type=style&index=0&id=835de820&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"835de820\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/teacherPart/teacherPart.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./teacherPart.vue?vue&type=template&id=835de820&scoped=true&\"","var components\ntry {\n  components = {\n    uniCard: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-card/components/uni-card/uni-card\" */ \"@/uni_modules/uni-card/components/uni-card/uni-card.vue\"\n      )\n    },\n    uniList: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list/uni-list\" */ \"@/uni_modules/uni-list/components/uni-list/uni-list.vue\"\n      )\n    },\n    uniListItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list-item/uni-list-item\" */ \"@/uni_modules/uni-list/components/uni-list-item/uni-list-item.vue\"\n      )\n    },\n    uniDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker\" */ \"@/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue\"\n      )\n    },\n    circleProgress: function () {\n      return import(\n        /* webpackChunkName: \"components/circleProgress/circleProgress\" */ \"@/components/circleProgress/circleProgress.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniSwipeAction: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action.vue\"\n      )\n    },\n    uniSwipeActionItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item\" */ \"@/uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item.vue\"\n      )\n    },\n    clockItem: function () {\n      return import(\n        /* webpackChunkName: \"components/clockItem/clockItem\" */ \"@/components/clockItem/clockItem.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog\" */ \"@/uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n    uniDrawer: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-drawer/components/uni-drawer/uni-drawer\" */ \"@/uni_modules/uni-drawer/components/uni-drawer/uni-drawer.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = JSON.stringify(_vm.selectedCourse)\n  var g1 = _vm.showPage && JSON.stringify(_vm.selectedCourse) !== \"{}\"\n  var g2 = g1 ? JSON.stringify(_vm.selectedCourse) : null\n  var g3 = _vm.showPage && JSON.stringify(_vm.courseList) === \"[]\"\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./teacherPart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./teacherPart.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"teacher\">\r\n    <view class=\"page-top\">\r\n      <image src=\"../../static/tab_icons/openDrawer.png\" @click=\"showDrawer('showLeft')\"></image>\r\n      <view class=\"title\" v-if=\"JSON.stringify(selectedCourse) !== '{}'\">{{selectedCourse.courseName}}</view>\r\n      <image src=\"../../static/tab_icons/add.png\" @click=\"addCourse\"></image>\r\n    </view>\r\n    <view class=\"hasTeaData\" v-if=\"showPage && JSON.stringify(selectedCourse) !== '{}'\">\r\n      <view class=\"dataBody\">\r\n        <view class=\"page-bottom\" v-if=\"JSON.stringify(selectedCourse) !== '{}'\">\r\n          <uni-card title=\"基础卡片\" extra=\"额外信息\" :is-shadow=\"isShadow\">\r\n            <template v-slot:title>\r\n              <view class=\"card-top\">\r\n                <view class=\"left\">\r\n                  <image src=\"../../static/tab_icons/class.png\" class=\"classImage\"></image>\r\n                  <text>课程信息</text>\r\n                </view>\r\n                <view class=\"right\">\r\n                  <image v-if=\"!isEdit\" src=\"../../static/tab_icons/edit.png\" class=\"extraImage\"\r\n                    @click=\"changeEditStatus\"></image>\r\n                  <image v-else src=\"../../static/tab_icons/complete.png\" class=\"extraImage\" @click=\"changeEditStatus\">\r\n                  </image>\r\n                </view>\r\n              </view>\r\n            </template>\r\n            <view class=\"card-body\">\r\n              <uni-list>\r\n                <uni-list-item title=\"打卡时间\" showArrow :rightText=\"!isUploadTime ? '未设置' : '已设置'\" clickable\r\n                  @click=\"toggle('bottom', 'time')\" />\r\n                <uni-list-item title=\"打卡方式\" showArrow :rightText=\"!isUploadMethod ? '未设置' : '已设置'\" clickable\r\n                  @click=\"toggle('bottom', 'method')\" />\r\n                <uni-list-item title=\"打卡人员\" showArrow :rightText=\"!isUploadStaff ? '未设置' : '已设置'\" clickable\r\n                  @click=\"toggle('bottom', 'staff')\" />\r\n              </uni-list>\r\n            </view>\r\n          </uni-card>\r\n        </view>\r\n      </view>\r\n      <view class=\"readPunch\" v-if=\"showPunResCom\">\r\n        <view class=\"pickBody\">\r\n          <uni-datetime-picker type=\"date\" :clear-icon=\"false\" v-model=\"selDate\" :end=\"currentDate\"\r\n            @change=\"confirmDate\"/>\r\n        </view>\r\n        <view class=\"circleProgress\" @click=\"lookUpPunchRes\">\r\n          <circleProgress :alreadyPunchCount=\"alreadyPunchCount\" :totalStaffCount=\"totalStaffCount\" :isShowCanvas=\"isShowCanvas\"></circleProgress>\r\n        </view>\r\n      </view>\r\n      <view class=\"editTime\">\r\n        <!-- 编辑打卡时间的弹窗 -->\r\n        <uni-popup ref=\"popupTime\" background-color=\"#fff\" @change=\"change\" @maskClick=\"maskClick\">\r\n          <view class=\"popupTimeStyle\">\r\n            <view class=\"top\">\r\n              <image src=\"../../static/tab_icons/close.png\" @click=\"timeClose\"></image>\r\n              <text>设置时间</text>\r\n              <image src=\"../../static/tab_icons/check.png\" @click=\"timeOk\"></image>\r\n            </view>\r\n            <view class=\"selectTime\">\r\n              <view class=\"left\">\r\n                <picker-view :indicator-style=\"indicatorStyle\" :value=\"valueOfStart\" @change=\"bindChangeOfStart\"\r\n                  class=\"picker-view\">\r\n                  <picker-view-column>\r\n                    <view class=\"item\" v-for=\"(item,index) in hoursOfStart\" :key=\"index\">{{item}}</view>\r\n                  </picker-view-column>\r\n                  <picker-view-column>\r\n                    <view class=\"item\" v-for=\"(item,index) in minutesOfStart\" :key=\"index\">{{item}}</view>\r\n                  </picker-view-column>\r\n                </picker-view>\r\n              </view>\r\n              <view class=\"middle\"></view>\r\n              <view class=\"right\">\r\n                <picker-view :indicator-style=\"indicatorStyle\" :value=\"valueOfEnd\" @change=\"bindChangeOfEnd\"\r\n                  class=\"picker-view\">\r\n                  <picker-view-column>\r\n                    <view class=\"item\" v-for=\"(item,index) in hoursOfEnd\" :key=\"index\">{{item}}</view>\r\n                  </picker-view-column>\r\n                  <picker-view-column>\r\n                    <view class=\"item\" v-for=\"(item,index) in minutesOfEnd\" :key=\"index\">{{item}}</view>\r\n                  </picker-view-column>\r\n                </picker-view>\r\n              </view>\r\n            </view>\r\n            <view class=\"selectDate\">\r\n              <uni-list :border=\"false\">\r\n                <uni-list-item :border=\"false\" title=\"打卡日期\" :note=\"note === '' ? '请选择' : note\" clickable showArrow\r\n                  @click=\"selectDate\"></uni-list-item>\r\n              </uni-list>\r\n            </view>\r\n            <view class=\"clockList\">\r\n              <scroll-view :scroll-top=\"scrollTop\" scroll-y=\"true\" :style=\"{height: 400 + 'rpx'}\">\r\n                <uni-swipe-action>\r\n                  <block v-for=\"(item, i) in clockList\" :key=\"i\">\r\n                    <uni-swipe-action-item :right-options=\"options\" @click=\"swipeItemClickHandler(i)\" @change=\"change\">\r\n                      <clockItem :item=\"item\"></clockItem>\r\n                    </uni-swipe-action-item>\r\n                  </block>\r\n                </uni-swipe-action>\r\n              </scroll-view>\r\n            </view>\r\n          </view>\r\n        </uni-popup>\r\n      </view>\r\n      <view class=\"selectMethod\">\r\n        <uni-popup ref=\"popupMethod\" background-color=\"#fff\" @change=\"change\" @maskClick=\"maskClick\">\r\n          <view class=\"clockType\">\r\n            <button plain=\"true\" @click=\"selectMethodOfClock('普通打卡')\">普通打卡</button>\r\n            <button plain=\"true\" @click=\"selectMethodOfClock('定位打卡')\">定位打卡</button>\r\n            <button plain=\"true\" @click=\"selectMethodOfClock('人脸识别')\">人脸识别</button>\r\n          </view>\r\n        </uni-popup>\r\n      </view>\r\n      <view class=\"readAttendanceTime\">\r\n        <uni-popup ref=\"popupAttendanceTime\" background-color=\"#fff\" @change=\"change\" @maskClick=\"maskClick\">\r\n          <view class=\"body\">\r\n            <uni-list>\r\n              <block v-for=\"(item, i) in selectedCourse.clockList\" :key=\"i\">\r\n                <uni-list-item :title=\"'每周' + item.date\" :rightText=\"item.timeOfStart + '—' + item.timeOfEnd\" />\r\n              </block>\r\n            </uni-list>\r\n          </view>\r\n        </uni-popup>\r\n      </view>\r\n      <view class=\"readAttendanceMethod\">\r\n        <uni-popup ref=\"popupAttendanceMethod\" background-color=\"#fff\" @change=\"change\" @maskClick=\"maskClick\">\r\n          <view class=\"body\">\r\n            <uni-list>\r\n              <uni-list-item title=\"打卡时间\" :rightText=\"selectedCourse.method\" />\r\n              <uni-list-item clickable\r\n                @click=\"openLocation(selectedCourse.location.latitude, selectedCourse.location.longitude)\">\r\n                <template v-slot:header>\r\n                  <view class=\"slot-methodNote\">\r\n                    <text>备注</text>\r\n                  </view>\r\n                </template>\r\n                <template v-slot:footer>\r\n                  <view class=\"slot-methodNoteInfo\">\r\n                    <text v-if=\"selectedCourse.method === '定位打卡'\">{{selectedCourse.location.name}}</text>\r\n                    <text v-else>无</text>\r\n                  </view>\r\n                </template>\r\n              </uni-list-item>\r\n            </uni-list>\r\n          </view>\r\n        </uni-popup>\r\n      </view>\r\n    </view>\r\n    <view>\r\n      <!-- 输入框 -->\r\n      <uni-popup ref=\"inputDialog\" type=\"dialog\">\r\n        <uni-popup-dialog mode=\"input\" title=\"添加新课程\" placeholder=\"请输入内容\" :before-close=\"true\" @confirm=\"dialogInputConfirm\" @close=\"dialogInputCourseClose\">\r\n        </uni-popup-dialog>\r\n      </uni-popup>\r\n    </view>\r\n    <view class=\"drawer\">\r\n      <uni-drawer ref=\"showLeft\" mode=\"left\" :width=\"320\" @change=\"change($event,'showLeft')\">\r\n        <view class=\"close\">\r\n          <image src=\"../../static/tab_icons/closeDrawer.png\" @click=\"closeDrawer('showLeft')\"></image>\r\n        </view>\r\n        <view>\r\n          <uni-list :border=\"true\">\r\n            <block v-for=\"(item, i) in courseList\" :key=\"i\">\r\n              <uni-list-item :title=\"item.courseName\" clickable @click=\"activeChanged(i)\"\r\n                :class=\"i === active? 'active' : ''\"></uni-list-item>\r\n            </block>\r\n          </uni-list>\r\n        </view>\r\n      </uni-drawer>\r\n    </view>\r\n    <view class=\"noTeaData\" v-if=\"showPage && JSON.stringify(courseList) === '[]'\" :style=\"{width:viewWidth, height:viewHeight}\">\r\n      <image src=\"@/static/tab_icons/noData.png\" @load=\"autoView\" >\r\n      </image>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import bus from '@/utils/bus.js'\r\n  import {\r\n    mapState\r\n  } from 'vuex'\r\n  import clockItem from '@/components/clockItem/clockItem.vue'\r\n  import circleProgress from '@/components/circleProgress/circleProgress.vue'\r\n\r\n  export default {\r\n    components: {\r\n      clockItem,\r\n      circleProgress\r\n    },\r\n    data() {\r\n      const date = new Date()\r\n      const hoursOfStart = []\r\n      const hoursOfEnd = []\r\n      const hourOfStart = date.getHours()\r\n      const hourOfEnd = date.getHours()\r\n      const minutesOfStart = []\r\n      const minutesOfEnd = []\r\n      const minuteOfStart = date.getMinutes()\r\n      const minuteOfEnd = date.getMinutes()\r\n      const start = '' + date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate()\r\n      for (let i = 0; i <= 23; i++) {\r\n        if (i < 10) {\r\n          hoursOfStart.push('0' + i)\r\n          hoursOfEnd.push('0' + i)\r\n        } else {\r\n          hoursOfStart.push('' + i)\r\n          hoursOfEnd.push('' + i)\r\n        }\r\n      }\r\n      for (let i = 0; i <= 59; i++) {\r\n        if (i < 10) {\r\n          minutesOfStart.push('0' + i)\r\n          minutesOfEnd.push('0' + i)\r\n        } else {\r\n          minutesOfStart.push('' + i)\r\n          minutesOfEnd.push('' + i)\r\n        }\r\n      }\r\n      return {\r\n        title: 'picker-view',\r\n        hoursOfStart,\r\n        hoursOfEnd,\r\n        hourOfStart,\r\n        hourOfEnd,\r\n        minutesOfStart,\r\n        minutesOfEnd,\r\n        minuteOfStart,\r\n        minuteOfEnd,\r\n        valueOfStart: [hourOfStart, minuteOfStart],\r\n        valueOfEnd: [hourOfEnd, minuteOfEnd],\r\n        indicatorStyle: `height: 40px;`,\r\n\r\n        showRight: false,\r\n        showLeft: false,\r\n        courseList: [], // 课程列表\r\n        selectedCourse: {}, // 选中的课程\r\n        active: 0,\r\n        isEdit: false, // 编辑状态\r\n        isShadow: false,\r\n        mode: '', // 底部弹窗模式\r\n        note: '', // 打卡日期\r\n        start, // 开始选择的日期\r\n        scrollTop: 0,\r\n        clockList: [], // 打卡时间列表\r\n        methodOfClock: '', // 打卡方式\r\n        staff: [], // 打卡人员\r\n        fileName: '', // 文件名称\r\n        location: {}, // 地理位置对象\r\n        isUploadMethod: false, // 是否上传打卡方式\r\n        isUploadTime: false, // 是否上传打卡时间\r\n        isUploadStaff: false, // 是否上传打卡人员\r\n        currentDate: '', // 当天日期\r\n        selDate: '', // 选中的日期\r\n        showPunResCom: false, // 是否显示打卡结果组件\r\n        punchResInfo: {},   // 打卡结果\r\n        alreadyPunchCount: 0,   // 某天已打卡人数\r\n        totalStaffCount: 0,    // 需打卡总人数\r\n        isShowCanvas: true,  // 是否显示画布\r\n        options: [{\r\n          text: '删除',\r\n          style: {\r\n            backgroundColor: '#F56C6C'\r\n          }\r\n        }],\r\n        viewWidth: '', // 缺省部分宽度\r\n        viewHeight: '', // 缺省部分高度\r\n        showPage: false\r\n      }\r\n    },\r\n    options: {\r\n      styleIsolation: 'shared'\r\n    },\r\n    computed: {\r\n      ...mapState('m_user', ['userInfo', 'token', 'userData'])\r\n    },\r\n    created() {\r\n      uni.$on('isSDKReady', value => {\r\n        this.updateMyProfile()\r\n      });\r\n      bus.$on('calendarCloseFn', (data) => {\r\n        this.isShowCanvas = data\r\n      })\r\n      this.getCurrentDate()\r\n      this.getCourseList(this.token)\r\n    },\r\n    methods: {\r\n      // 修改聊天个人信息\r\n      updateMyProfile() {\r\n        uni.$TUIKit\r\n          .updateMyProfile({\r\n            avatar: this.userInfo.avatar,\r\n            nick: this.userInfo.nickName\r\n          })\r\n          .then(imResponse => {\r\n            // 更新资料成功\r\n            console.log('update', imResponse.data);\r\n          })\r\n          .catch((imError) => {\r\n            // 更新资料失败\r\n            console.warn('updateMyProfile error:', imError);\r\n          });\r\n      },\r\n      // 得到当天日期\r\n      getCurrentDate() {\r\n        let date = new Date()\r\n        let fullYear = date.getFullYear()\r\n        let month = date.getMonth() + 1\r\n        let day = date.getDate()\r\n        this.currentDate = fullYear + '-' + month + '-' + day\r\n        this.selDate = this.currentDate\r\n      },\r\n      // 选择日期确认\r\n      confirmDate(e) {\r\n        this.selDate = e\r\n        this.calculatePunchResult()\r\n      },\r\n      // 跳转页面查看打卡结果\r\n      lookUpPunchRes() {\r\n        if (JSON.stringify(this.punchResInfo) !== '{}') {\r\n          uni.navigateTo({\r\n            url: '/page_teaPart/lookUpPunchRes/lookUpPunchRes?punchResInfo=' + encodeURIComponent(JSON.stringify(this.punchResInfo))\r\n          })\r\n        }\r\n      },\r\n      // 是否显示打卡结果组件\r\n      isShowPunchResComponent() {\r\n        if (!this.isEdit && this.isUploadMethod && this.isUploadStaff && this.isUploadTime) {\r\n          this.showPunResCom = true\r\n          this.calculatePunchResult()\r\n        } else {\r\n          this.showPunResCom = false\r\n        }\r\n      },\r\n      // 计算打卡结果\r\n      calculatePunchResult() {\r\n        this.punchResInfo = {}\r\n        this.alreadyPunchCount = 0\r\n        this.totalStaffCount = 0\r\n        let date = new Date(this.selDate)\r\n        let currentWeek = date.getDay()\r\n        let isInClockDate = false\r\n        let weekMap = new Map([\r\n          [0, '日'],\r\n          [1, '一'],\r\n          [2, '二'],\r\n          [3, '三'],\r\n          [4, '四'],\r\n          [5, '五'],\r\n          [6, '六']\r\n        ])\r\n        for (let item of this.clockList) {\r\n          if (weekMap.get(currentWeek) === item.date) {\r\n            // 所选择的日期在需打卡时间列表里面\r\n            isInClockDate = true\r\n            break\r\n          }\r\n        }\r\n        if (isInClockDate) {\r\n          let res = this.calculateAlreadyPunchStaffCount()\r\n          if (res.punch) {\r\n            // 所选择的日期在已打卡列表中\r\n            this.alreadyPunchCount = res.punch.punchList.length\r\n          }\r\n          this.getPunchList(this.selectedCourse.staffList, res)\r\n          this.totalStaffCount = this.selectedCourse.staffList.length\r\n        }\r\n      },\r\n      // 获取打卡结果\r\n      getPunchList(staffList, punchInfo) {\r\n        this.punchResInfo.punchResList = staffList\r\n        this.punchResInfo.course_id = this.selectedCourse._id\r\n        this.punchResInfo.date = punchInfo.date\r\n        for (let item of this.punchResInfo.punchResList) {\r\n          item.isPunch = false\r\n        }\r\n        if (punchInfo.punch) {\r\n          for (let item1 of punchInfo.punch.punchList) {\r\n            for (let item2 of this.punchResInfo.punchResList) {\r\n              if (item1.code === item2.code) {\r\n                item2.isPunch = true\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      // 返回某天已打卡信息\r\n      calculateAlreadyPunchStaffCount() {\r\n        let count = 0\r\n        let year = this.selDate.split('-')[0]\r\n        let month = +this.selDate.split('-')[1]\r\n        let day = +this.selDate.split('-')[2]\r\n        let dateStr = year + '.' + month + '.' + day\r\n        let punchInfo = {}  // 某天的打卡信息\r\n        punchInfo.date = dateStr\r\n        if (this.selectedCourse.alreadyPunchStaffList) {\r\n          for (let item of this.selectedCourse.alreadyPunchStaffList) {\r\n            if (dateStr === item.date) {\r\n              punchInfo.punch = item\r\n              break\r\n            }\r\n          }\r\n        }\r\n        return punchInfo\r\n      },\r\n      // 设置缺省部分宽高\r\n      autoView(e) {\r\n        uni.getSystemInfo({\r\n          complete: (res) => {\r\n            this.viewWidth = res.windowWidth + 'px'\r\n            this.viewHeight = res.windowHeight - 42.5 + 'px'\r\n          }\r\n        })\r\n      },\r\n      // 打开窗口\r\n      showDrawer(e) {\r\n        if (this.isEdit) return\r\n        this.isShowCanvas = false\r\n        this.$refs[e].open()\r\n      },\r\n      // 关闭窗口\r\n      closeDrawer(e) {\r\n        this.isShowCanvas = true\r\n        this.$refs[e].close()\r\n      },\r\n      // 抽屉状态发生变化触发\r\n      change(e, type) {\r\n        this[type] = e\r\n      },\r\n      // 添加课程\r\n      addCourse() {\r\n        if (this.isEdit) return\r\n        this.isShowCanvas = false\r\n        this.$refs.inputDialog.open()\r\n      },\r\n      // 添加课程对话框确认\r\n      async dialogInputConfirm(val) {\r\n        uni.hideLoading()\r\n        if (val !== '') {\r\n          this.$refs.inputDialog.close()\r\n          this.isShowCanvas = true\r\n          let obj = {\r\n            token: this.token,\r\n            courseName: val\r\n          }\r\n          const courseHelper = uniCloud.importObject('courseHelper')\r\n          let res = await courseHelper.addNewCourse(obj)\r\n          if (res.code === 200) {\r\n            uni.$showMsg(res.message, 'success')\r\n          } else if (res.code === 401) {\r\n            uni.$showMsg(res.message, 'error')\r\n          } else {\r\n            uni.$showMsg(res.message, 'error')\r\n          }\r\n          this.getCourseList(this.token)\r\n        } else {\r\n          uni.$showMsg('请输入课程名', 'none')\r\n        }\r\n      },\r\n      // 添加课程对话框取消\r\n      dialogInputCourseClose() {\r\n        this.$refs.inputDialog.close()\r\n        this.isShowCanvas = true\r\n      },\r\n      // 加载课程列表\r\n      async getCourseList(token) {\r\n        const courseHelper = uniCloud.importObject('courseHelper')\r\n        let res = await courseHelper.getCourseList(token)\r\n        if (res.code === 201) {\r\n          if (res.data.length) {\r\n            this.courseList = res.data\r\n            this.getCourseInfo(token, this.courseList[0]._id)\r\n          }\r\n        this.showPage = true\r\n        } else if (res.code === 402) {\r\n          uni.$showMsg(res.message, 'error')\r\n        }\r\n      },\r\n      // 加载某课程信息\r\n      async getCourseInfo(token, course_id) {\r\n        const courseHelper = uniCloud.importObject('courseHelper')\r\n        let res = await courseHelper.getCourseInfo(token, course_id)\r\n        if (res.code === 403) {\r\n          uni.$showMsg(res.message, 'none')\r\n        } else {\r\n          this.selectedCourse = res\r\n          if (this.selectedCourse.clockList) {\r\n            this.clockList = this.selectedCourse.clockList\r\n          }\r\n          this.isUploadTime = false\r\n          this.isUploadMethod = false\r\n          this.isUploadStaff = false\r\n          if (this.selectedCourse.clockList !== undefined) {\r\n            this.isUploadTime = true\r\n          }\r\n          if (this.selectedCourse.staffList !== undefined) {\r\n            this.isUploadStaff = true\r\n          }\r\n          if (this.selectedCourse.method !== '') {\r\n            this.isUploadMethod = true\r\n          }\r\n          this.isShowPunchResComponent()\r\n        }\r\n      },\r\n      // 根据位置信息打开地图\r\n      openLocation(latitude, longitude) {\r\n        if (this.selectedCourse.method === '定位打卡' && latitude && longitude) {\r\n          uni.openLocation({\r\n            latitude: latitude,\r\n            longitude: longitude,\r\n            success: () => {\r\n              console.log('success')\r\n            }\r\n          })\r\n        }\r\n      },\r\n      // 选择打卡方式\r\n      selectMethodOfClock(method) {\r\n        this.methodOfClock = method\r\n        if (method === '定位打卡') {\r\n          this.getMapLocation()\r\n        } else {\r\n          this.location = {}\r\n          this.upLoadMethod()\r\n        }\r\n        this.$refs.popupMethod.close()\r\n        this.isShowCanvas = true\r\n      },\r\n      // 腾讯地图定位功能\r\n      getMapLocation() {\r\n        uni.getSetting({\r\n          success: (res) => {\r\n            // 用户已授权地理位置\r\n            if (res.authSetting['scope.userLocation']) {\r\n              uni.chooseLocation({\r\n                success: (res) => {\r\n                  this.location.name = res.name\r\n                  this.location.address = res.address\r\n                  this.location.latitude = res.latitude\r\n                  this.location.longitude = res.longitude\r\n                  this.upLoadMethod()\r\n                },\r\n                fail: () => {\r\n                  uni.$showMsg('获取定位失败或用户取消', 'none')\r\n                }\r\n              })\r\n            }\r\n            // 用户地理位置处于关闭状态\r\n            else if (res.authSetting['scope.userLocation'] === undefined) {\r\n              uni.authorize({\r\n                scope: 'scope.userLocation',\r\n                success: (res) => {\r\n                  // 用户同意授权\r\n                  uni.chooseLocation({\r\n                    success: (res) => {\r\n                      this.location.name = res.name\r\n                      this.location.address = res.address\r\n                      this.location.latitude = res.latitude\r\n                      this.location.longitude = res.longitude\r\n                      this.upLoadMethod()\r\n                    },\r\n                    fail: () => {\r\n                      uni.$showMsg('获取定位失败或用户取消', 'none')\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n            }\r\n          },\r\n          fail: () => {\r\n            uni.$showMsg('获取授权信息失败', 'none')\r\n          }\r\n        })\r\n      },\r\n      // 上传打卡方式到数据库\r\n      async upLoadMethod() {\r\n        const courseHelper = uniCloud.importObject('courseHelper')\r\n        let result = await courseHelper.addMethod(this.token, this.methodOfClock, this.location, this.selectedCourse\r\n          ._id)\r\n        if (result.updated !== 0 && result.code === undefined) {\r\n          this.isUploadMethod = true\r\n          uni.$showMsg('更新成功', 'success')\r\n        } else if (result.code === 403) {\r\n          uni.$showMsg('更新失败', 'none')\r\n        }\r\n      },\r\n      // 选择课程\r\n      activeChanged(i) {\r\n        this.active = i\r\n        this.clockList = []\r\n        this.getCourseInfo(this.token, this.courseList[i]._id)\r\n      },\r\n      // 改变编辑状态\r\n      changeEditStatus() {\r\n        if (!this.isEdit) {\r\n          this.isEdit = true\r\n          this.isShadow = true\r\n        } else {\r\n          if (this.isUploadMethod && this.isUploadStaff && this.isUploadTime) {\r\n            this.isEdit = false\r\n            this.isShadow = false\r\n            this.getCourseInfo(this.token, this.selectedCourse._id)\r\n          } else {\r\n            uni.$showMsg('请设置完全部项', 'none')\r\n          }\r\n        }\r\n      },\r\n      // 底部弹窗\r\n      toggle(type, mode) {\r\n        if (this.isEdit) {\r\n          this.mode = mode\r\n          if (mode === 'time') {\r\n            this.isShowCanvas = false\r\n            this.$refs.popupTime.open(type)\r\n          } else if (mode === 'method') {\r\n            this.isShowCanvas = false\r\n            this.$refs.popupMethod.open(type)\r\n          } else if (mode === 'staff') {\r\n            wx.chooseMessageFile({\r\n              count: 1,\r\n              type: 'file',\r\n              success: (res) => {\r\n                // 判断文件类型\r\n                let fileType = res.tempFiles[0].name.substring(res.tempFiles[0].name.lastIndexOf('.') + 1)\r\n                if (fileType !== 'xlsx' && fileType !== 'xls') {\r\n                  uni.$showMsg('选择的文件不是excel文件，请重新选择!', 'none')\r\n                } else {\r\n                  this.fileName = res.tempFiles[0].name\r\n                  let path = res.tempFiles[0].path\r\n                  this.uploadExcel(path, fileType)\r\n                }\r\n              },\r\n              fail: err => {\r\n                console.log(err)\r\n              }\r\n            });\r\n          }\r\n        } else {\r\n          if (mode === 'time') {\r\n            if (this.selectedCourse.clockList) {\r\n              this.isShowCanvas = false\r\n              this.$refs.popupAttendanceTime.open('center')\r\n            }\r\n          } else if (mode === 'method') {\r\n            if (this.selectedCourse.method) {\r\n              this.isShowCanvas = false\r\n              this.$refs.popupAttendanceMethod.open('center')\r\n            }\r\n          } else {\r\n            if (this.selectedCourse.staffList) {\r\n              uni.navigateTo({\r\n                url: '/page_teaPart/lookUpStaff/lookUpStaff?staff=' + encodeURIComponent(JSON.stringify(this.selectedCourse\r\n                  .staffList))\r\n              })\r\n            }\r\n          }\r\n        }\r\n      },\r\n      // 上传文件到云端\r\n      uploadExcel(filePath, fileType) {\r\n        uniCloud.uploadFile({\r\n          filePath: filePath,\r\n          cloudPath: new Date().getTime() + '.' + fileType,\r\n          success: (res) => {\r\n            this.parseFile(res.fileID)\r\n          },\r\n          fail: () => {\r\n            uni.$showMsg('文件上传失败', 'error')\r\n          }\r\n        })\r\n      },\r\n      // 解析上传的文件\r\n      async parseFile(fileID) {\r\n        const parseExcel = uniCloud.importObject('parseExcel')\r\n        let res = await parseExcel.parseF(fileID, this.selectedCourse._id, this.token)\r\n        if (res.code === 200) {\r\n          this.isUploadStaff = true\r\n          uni.$showMsg('解析文件成功', 'success')\r\n        } else {\r\n          uni.$showMsg('解析文件失败', 'none')\r\n        }\r\n      },\r\n      // 所有弹窗点击遮罩层关闭\r\n      maskClick() {\r\n        this.isShowCanvas = true\r\n      },\r\n      // 关闭设置时间的底部弹窗\r\n      async timeClose() {\r\n        if (this.chackClockList()) {\r\n          if (JSON.stringify(this.clockList) !== '[]') {\r\n            const courseHelper = uniCloud.importObject('courseHelper')\r\n            let res = await courseHelper.addClockList(this.token, this.clockList, this.selectedCourse._id)\r\n            if (res.code === 200) {\r\n              this.isUploadTime = true\r\n              uni.$showMsg(res.message, \"success\")\r\n            } else {\r\n              uni.$showMsg(res.message, \"error\")\r\n            }\r\n            this.$refs.popupTime.close()\r\n            this.isShowCanvas = true\r\n          } else {\r\n            uni.$showMsg(\"请设置打卡时间\", \"none\")\r\n          }\r\n        } else {\r\n          uni.$showMsg(\"日期存在冲突，请重新设置\", \"none\")\r\n        }\r\n      },\r\n      // 设置时间完成\r\n      timeOk() {\r\n        if ((+this.hourOfStart > +this.hourOfEnd) || (+this.hourOfStart > +this.hourOfEnd && +this.minuteOfStart >= +\r\n            this.minuteOfEnd) || (+this.hourOfStart === +this.hourOfEnd && +this.minuteOfStart >= +this.minuteOfEnd)) {\r\n          uni.$showMsg(\"时间有误，请重新设置\", \"none\")\r\n        } else if (this.note === '') {\r\n          uni.$showMsg(\"请选择打卡日期\", \"none\")\r\n        } else {\r\n          let timeObj = this.clockInfoToStr(this.hourOfStart, this.minuteOfStart, this.hourOfEnd, this.minuteOfEnd)\r\n          let obj = {\r\n            ...timeObj,\r\n            date: this.note.substring(2)\r\n          }\r\n          this.clockList.push(obj)\r\n          this.note = ''\r\n        }\r\n      },\r\n      // 左滑时间列表项\r\n      swipeItemClickHandler(i) {\r\n        for (let j = i + 1; j < this.clockList.length; j++) {\r\n          this.clockList[j - 1] = this.clockList[j]\r\n        }\r\n        this.clockList.pop()\r\n      },\r\n      // 检查打卡时间列表\r\n      chackClockList() {\r\n        let set = new Set()\r\n        let flag = 0\r\n        for (let item of this.clockList) {\r\n          let fre = item.date\r\n          if (fre.length > 1) {\r\n            let spl = fre.split('、')\r\n            for (let i of spl) {\r\n              if (!set.has(i)) {\r\n                set.add(i)\r\n              } else {\r\n                flag = 1\r\n                break\r\n              }\r\n            }\r\n          } else {\r\n            if (!set.has(fre)) {\r\n              set.add(fre)\r\n            } else {\r\n              flag = 1\r\n              break\r\n            }\r\n          }\r\n          if (flag === 1) return false\r\n        }\r\n        return flag === 1 ? false : true\r\n      },\r\n      // 时间信息转为字符串\r\n      clockInfoToStr(hourOfStart, minuteOfStart, hourOfEnd, minuteOfEnd) {\r\n        let hs = this.wordToStr(hourOfStart)\r\n        let ms = this.wordToStr(minuteOfStart)\r\n        let he = this.wordToStr(hourOfEnd)\r\n        let me = this.wordToStr(minuteOfEnd)\r\n        return {\r\n          timeOfStart: hs + ':' + ms,\r\n          timeOfEnd: he + ':' + me\r\n        }\r\n      },\r\n      // 转为带前导0字符串\r\n      wordToStr(word) {\r\n        if (typeof word === 'string') {\r\n          if (word.length === 1) {\r\n            word = '0' + word\r\n          }\r\n        } else {\r\n          if (word < 10) {\r\n            word = '0' + word\r\n          } else {\r\n            word = '' + word\r\n          }\r\n        }\r\n        return word\r\n      },\r\n      // 选择开始时间\r\n      bindChangeOfStart: function(e) {\r\n        const val = e.detail.value\r\n        this.hourOfStart = this.hoursOfStart[val[0]]\r\n        this.minuteOfStart = this.minutesOfStart[val[1]]\r\n      },\r\n      // 选择结束时间\r\n      bindChangeOfEnd: function(e) {\r\n        const val = e.detail.value\r\n        this.hourOfEnd = this.hoursOfEnd[val[0]]\r\n        this.minuteOfEnd = this.minutesOfEnd[val[1]]\r\n      },\r\n      // 选择打卡日期\r\n      selectDate() {\r\n        uni.navigateTo({\r\n          url: '/page_teaPart/selRecurDate/selRecurDate'\r\n        })\r\n      },\r\n      // 二级页面返回时调用\r\n      regionBindClick(data) {\r\n        if (data.length !== 0) {\r\n          let date = data.join('、')\r\n          this.note = date\r\n        } else {\r\n          this.note = ''\r\n        }\r\n      },\r\n      // 确定打卡日期\r\n      changeDate(e) {\r\n        this.noteOfDate = e\r\n        this.note = this.noteOfDate\r\n      },\r\n      // 二级页面返回时调用\r\n      regionBindClick(data) {\r\n        if (data.length !== 0) {\r\n          let date = '每周' + data.join('、')\r\n          this.note = date\r\n        } else {\r\n          this.note = ''\r\n        }\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  @import url('teacherPart.less');\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./teacherPart.vue?vue&type=style&index=0&id=835de820&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./teacherPart.vue?vue&type=style&index=0&id=835de820&lang=less&scoped=true&\""],"sourceRoot":""}